---
# No easy way to know OS type without python or without ansible facts.
# Run below raw commands and one would succeed with apt/yum on debian/centos
- name: Install python
  raw:
    apt-get -y update && apt-get install -y python-apt-common
  become: yes
  ignore_errors: yes

# network-integration test are ran with gather_facts: no
# We need to explicitly call setup so ansible_distribution is set

- name: Gather facts
  setup:
  become: yes

- name: Install openvswitch-switch package if we are on Ubuntu
  package:
    name: openvswitch-switch
    state: present
  become: yes
  when: ansible_distribution == 'Ubuntu'

- name: Install openvswitch package if we are on Fedora
  package:
    name: openvswitch
    state: installed
  become: yes
  when: ansible_distribution == 'Fedora'
